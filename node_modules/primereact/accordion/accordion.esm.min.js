import*as e from"react";import{PrimeReactContext as t}from"primereact/api";import{ComponentBase as n,useHandleStyle as r}from"primereact/componentbase";import{CSSTransition as a}from"primereact/csstransition";import{useMergeProps as o,useMountEffect as i}from"primereact/hooks";import{ChevronDownIcon as c}from"primereact/icons/chevrondown";import{ChevronRightIcon as l}from"primereact/icons/chevronright";import{ObjectUtils as u,classNames as s,UniqueComponentId as d,IconUtils as p,DomHandler as f}from"primereact/utils";function m(){return m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m.apply(this,arguments)}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h(e){if(Array.isArray(e))return b(e)}function y(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function g(e,t){if(e){if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}function v(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function O(e,t){if("object"!==E(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==E(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function S(e){var t=O(e,"string");return"symbol"===E(t)?t:String(t)}function P(e){if(Array.isArray(e))return e}function x(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,c=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return c}}function C(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function w(e,t){return P(e)||x(e,t)||g(e,t)||C()}var j=n.extend({defaultProps:{__TYPE:"Accordion",id:null,activeIndex:null,className:null,style:null,multiple:!1,expandIcon:null,collapseIcon:null,transitionOptions:null,onTabOpen:null,onTabClose:null,onTabChange:null,children:void 0},css:{classes:{root:"p-accordion p-component",accordiontab:{root:function(e){return s("p-accordion-tab",{"p-accordion-tab-active":e.selected})},content:"p-accordion-content",header:function(e){return s("p-accordion-header",{"p-highlight":e.selected,"p-disabled":(0,e.getTabProp)(e.tab,"disabled")})},headeraction:"p-accordion-header-link",headericon:"p-accordion-toggle-icon",headertitle:"p-accordion-header-text",toggleablecontent:"p-toggleable-content",transition:"p-toggleable-content"}},styles:"\n@layer primereact {\n    .p-accordion-header-link {\n        cursor: pointer;\n        display: flex;\n        align-items: center;\n        user-select: none;\n        position: relative;\n        text-decoration: none;\n    }\n    \n    .p-accordion-header-link:focus {\n        z-index: 1;\n    }\n    \n    .p-accordion-header-text {\n        line-height: 1;\n        width: 100%;\n    }\n}\n"}}),N=n.extend({defaultProps:{__TYPE:"AccordionTab",className:null,contentClassName:null,contentStyle:null,disabled:!1,header:null,headerClassName:null,headerStyle:null,headerTemplate:null,style:null,tabIndex:0,children:void 0},getCProp:function(e,t){return u.getComponentProp(e,t,N.defaultProps)},getCProps:function(e){return u.getComponentProps(e,N.defaultProps)},getCOtherProps:function(e){return u.getComponentDiffProps(e,N.defaultProps)}});function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){var r,a,o;r=e,o=n[t],(a=S(a=t))in r?Object.defineProperty(r,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[a]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var I=function(){},D=e.forwardRef((function(n,b){var E=o(),O=e.useContext(t),S=j.getProps(n,O),P=w(e.useState(S.id),2),x=P[0],C=P[1],T=w(e.useState(S.activeIndex),2),I=T[0],D=T[1],_=e.useRef(null),k=S.onTabChange?S.activeIndex:I,R=e.Children.count(S.children),J={props:S,state:{id:x,activeIndex:I}},U=j.setMetaData(A({},J)),X=U.ptm,H=U.ptmo,M=U.cx;r(j.css.styles,U.isUnstyled,{name:"accordion"});var Y=function(e,t){return N.getCProp(e,t)},z=function(e,t,n){var r={parent:J,context:{index:n,count:R,first:0===n,last:n===R-1,selected:ne(n),disabled:Y(e,"disabled")}};return E(X("tab.".concat(t),{tab:r}),X("accordiontab.".concat(t),{accordiontab:r}),X("accordiontab.".concat(t),r),H(Y(e,"pt"),t,r))},K=function(e,t,n){V(e,t,n)},V=function(e,t,n){if(!Y(t,"disabled")){var r=ne(n),a=null;if(S.multiple){var o=k||[];a=r?o.filter((function(e){return e!==n})):[].concat(h(c=o)||y(c)||g(c)||v(),[n])}else a=r?null:n;var i=r?S.onTabClose:S.onTabOpen;i&&i({originalEvent:e,index:n}),S.onTabChange?S.onTabChange({originalEvent:e,index:a}):D(a)}var c;e.preventDefault()},$=function(e,t,n){switch(e.code){case"ArrowDown":q(e);break;case"ArrowUp":B(e);break;case"Home":F(e);break;case"End":G(e);break;case"Enter":case"NumpadEnter":case"Space":L(e,t,n)}},q=function(e){var t=Q(e.target.parentElement.parentElement);t?te(t):F(e),e.preventDefault()},B=function(e){var t=W(e.target.parentElement.parentElement);t?te(t):G(e),e.preventDefault()},F=function(e){var t=Z();te(t),e.preventDefault()},G=function(e){var t=ee();te(t),e.preventDefault()},L=function(e,t,n){V(e,t,n),e.preventDefault()},Q=function e(t){var n=f.findSingle(arguments.length>1&&void 0!==arguments[1]&&arguments[1]?t:t.nextElementSibling,'[data-pc-section="header"]');return n?f.getAttribute(n,"data-p-disabled")?e(n.parentElement):f.findSingle(n,'[data-pc-section="headeraction"]'):null},W=function e(t){var n=f.findSingle(arguments.length>1&&void 0!==arguments[1]&&arguments[1]?t:t.previousElementSibling,'[data-pc-section="header"]');return n?f.getAttribute(n,"data-p-disabled")?e(n.parentElement):f.findSingle(n,'[data-pc-section="headeraction"]'):null},Z=function(){return Q(_.current.firstElementChild,!0)},ee=function(){return W(_.current.lastElementChild,!0)},te=function(e){e&&f.focus(e)},ne=function(e){return S.multiple&&Array.isArray(k)?k&&k.some((function(t){return t===e})):k===e};if(e.useImperativeHandle(b,(function(){return{props:S,getElement:function(){return _.current}}})),i((function(){x||C(d())})),!x)return null;var re=function(t,n,r){var a=A(A({},Y(t,"style")||{}),Y(t,"headerStyle")||{}),o=x+"_header_"+r,i=x+"_content_"+r,d=Y(t,"disabled")?-1:Y(t,"tabIndex"),f=E({className:M("accordiontab.headertitle")},z(t,"headertitle",r)),m=N.getCProps(t),b=Y(t,"headerTemplate")?u.getJSXElement(Y(t,"headerTemplate"),m):e.createElement("span",f,u.getJSXElement(Y(t,"header"),m)),h=E({"aria-hidden":"true",className:M("accordiontab.headericon")},z(t,"headericon",r)),y=p.getJSXIcon(n?S.collapseIcon||e.createElement(c,h):S.expandIcon||e.createElement(l,h),A({},h),{props:S,selected:n}),g=E({className:s(Y(t,"headerClassName"),Y(t,"className"),M("accordiontab.header",{selected:n,getTabProp:Y,tab:t})),style:a,"data-p-highlight":n,"data-p-disabled":Y(t,"disabled")},z(t,"header",r)),v=E({id:o,href:"#"+i,className:M("accordiontab.headeraction"),role:"button",tabIndex:d,onClick:function(e){return K(e,t,r)},onKeyDown:function(e){return $(e,t,r)},"aria-disabled":Y(t,"disabled"),"aria-controls":i,"aria-expanded":n},z(t,"headeraction",r));return e.createElement("div",g,e.createElement("a",v,y,b))},ae=function(t,n,r){var o=A(A({},Y(t,"style")||{}),Y(t,"contentStyle")||{}),i=x+"_content_"+r,c=x+"_header_"+r,l=e.createRef(),u=E({id:i,ref:l,className:s(Y(t,"contentClassName"),Y(t,"className"),M("accordiontab.toggleablecontent")),style:o,role:"region","aria-labelledby":c},z(t,"toggleablecontent",r)),d=E({className:M("accordiontab.content")},z(t,"content",r)),p=E({classNames:M("accordiontab.transition"),timeout:{enter:1e3,exit:450},in:n,unmountOnExit:!0,options:S.transitionOptions},z(t,"transition",r));return e.createElement(a,m({nodeRef:l},p),e.createElement("div",u,e.createElement("div",d,Y(t,"children"))))},oe=e.Children.map(S.children,(function(t,n){if(u.isValidChild(t,"AccordionTab")){var r=x+"_"+n,a=ne(n),o=re(t,a,n),i=ae(t,a,n),c=E({key:r,className:M("accordiontab.root",{selected:a})},N.getCOtherProps(t),z(t,"root",n));return e.createElement("div",c,o,i)}return null})),ie=E({className:s(S.className,M("root")),style:S.style},j.getOtherProps(S),X("root"));return e.createElement("div",m({id:x,ref:_},ie),oe)}));I.displayName="AccordionTab",D.displayName="Accordion";export{D as Accordion,I as AccordionTab};
