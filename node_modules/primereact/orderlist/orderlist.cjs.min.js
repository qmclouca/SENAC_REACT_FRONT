"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=require("primereact/api"),n=require("primereact/componentbase"),r=require("primereact/hooks"),o=require("primereact/utils"),i=require("primereact/button"),l=require("primereact/icons/angledoubledown"),a=require("primereact/icons/angledoubleup"),c=require("primereact/icons/angledown"),u=require("primereact/icons/angleup"),s=require("primereact/icons/search"),d=require("primereact/ripple");function p(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function f(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var m=f(e),v=p(t);function g(){return g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},g.apply(this,arguments)}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function y(e){if(Array.isArray(e))return b(e)}function h(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function I(e,t){if(e){if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}function D(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function O(e){return y(e)||h(e)||I(e)||D()}function E(e){if(Array.isArray(e))return e}function w(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,l,a=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(a.push(r.value),a.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw o}}return a}}function x(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function S(e,t){return E(e)||w(e,t)||I(e,t)||x()}var j=n.ComponentBase.extend({defaultProps:{__TYPE:"OrderList",id:null,ariaLabel:null,ariaLabelledBy:null,value:null,header:null,style:null,className:null,listStyle:null,dragdrop:!1,tabIndex:0,filterIcon:null,moveUpIcon:null,moveTopIcon:null,moveDownIcon:null,moveBottomIcon:null,dataKey:null,autoOptionFocus:!0,focusOnHover:!0,breakpoint:"960px",onChange:null,itemTemplate:null,filter:!1,filterBy:null,filterMatchMode:"contains",filterLocale:void 0,filterPlaceholder:null,filterTemplate:null,onFilter:null,children:void 0},css:{classes:{root:"p-orderlist p-component",controls:"p-orderlist-controls",droppoint:"p-orderlist-droppoint",header:"p-orderlist-header",list:"p-orderlist-list",icon:"p-orderlist-filter",filter:"p-orderlist-filter",filterInput:"p-orderlist-filter-input p-inputtext p-component",filterIcon:"p-orderlist-filter-icon",filterContainer:"p-orderlist-filter-container",container:"p-orderlist-list-container",item:function(e){return o.classNames("p-orderlist-item",{"p-highlight":e.selected,"p-focus":e.focused})}},styles:"\n@layer primereact {\n    .p-orderlist {\n        display: flex;\n    }\n\n    .p-orderlist-controls {\n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n    }\n\n    .p-orderlist-list-container {\n        flex: 1 1 auto;\n    }\n\n    .p-orderlist-list {\n        list-style-type: none;\n        margin: 0;\n        padding: 0;\n        overflow: auto;\n        min-height: 12rem;\n        max-height: 24rem;\n    }\n\n    .p-orderlist-item {\n        cursor: pointer;\n        overflow: hidden;\n        position: relative;\n    }\n\n    .p-orderlist-filter {\n        position: relative;\n    }\n\n    .p-orderlist-filter-icon {\n        position: absolute;\n        top: 50%;\n        margin-top: -.5rem;\n    }\n\n    .p-orderlist-filter-input {\n        width: 100%;\n    }\n\n    .p-orderlist.p-state-disabled .p-orderlist-item,\n    .p-orderlist.p-state-disabled .p-button {\n        cursor: default;\n    }\n\n    .p-orderlist.p-state-disabled .p-orderlist-list {\n        overflow: hidden;\n    }\n\n    .p-orderlist .p-orderlist-droppoint {\n        height: 0.5rem;\n    }\n\n    .p-orderlist .p-orderlist-droppoint.p-orderlist-droppoint-highlight {\n        background: var(--primary-color);\n    }\n}\n"}}),L=m.memo((function(e){var n=r.useMergeProps(),s=e.moveUpIcon||m.createElement(u.AngleUpIcon,null),d=e.moveTopIcon||m.createElement(a.AngleDoubleUpIcon,null),p=e.moveDownIcon||m.createElement(c.AngleDownIcon,null),f=e.moveBottomIcon||m.createElement(l.AngleDoubleDownIcon,null),v=e.ptm,b=e.cx,y=e.unstyled,h=o.ObjectUtils.isEmpty(e.value)||o.ObjectUtils.isEmpty(e.selection),I=n({className:b("controls")},v("controls",{hostName:e.hostName})),D=n({type:"button",unstyled:y,icon:s,onClick:function(t){if(e.selection){for(var n=O(e.value),r=0;r<e.selection.length;r++){var i=o.ObjectUtils.findIndexInList(e.selection[r],n,e.dataKey);if(0===i)break;var l=n[i-1];n[i-1]=n[i],n[i]=l}e.onReorder&&e.onReorder({originalEvent:t,value:n,direction:"up"})}},disabled:h,"aria-label":t.ariaLabel("moveUp"),__parentMetadata:{parent:e.metaData}},v("moveUpButton")),E=n({type:"button",unstyled:y,icon:d,onClick:function(t){if(e.selection){for(var n=O(e.value),r=e.selection.length-1;r>=0;r--){var i=o.ObjectUtils.findIndexInList(e.selection[r],n,e.dataKey);if(0===i)break;var l=n.splice(i,1)[0];n.unshift(l)}e.onReorder&&e.onReorder({originalEvent:t,value:n,direction:"top"})}},disabled:h,"aria-label":t.ariaLabel("moveTop"),__parentMetadata:{parent:e.metaData}},v("moveTopButton")),w=n({type:"button",unstyled:y,icon:p,onClick:function(t){if(e.selection){for(var n=O(e.value),r=e.selection.length-1;r>=0;r--){var i=o.ObjectUtils.findIndexInList(e.selection[r],n,e.dataKey);if(i===n.length-1)break;var l=n[i+1];n[i+1]=n[i],n[i]=l}e.onReorder&&e.onReorder({originalEvent:t,value:n,direction:"down"})}},disabled:h,"aria-label":t.ariaLabel("moveDown"),__parentMetadata:{parent:e.metaData}},v("moveDownButton")),x=n({type:"button",unstyled:y,icon:f,onClick:function(t){if(e.selection){for(var n=O(e.value),r=0;r<e.selection.length;r++){var i=o.ObjectUtils.findIndexInList(e.selection[r],n,e.dataKey);if(i===n.length-1)break;var l=n.splice(i,1)[0];n.push(l)}e.onReorder&&e.onReorder({originalEvent:t,value:n,direction:"bottom"})}},disabled:h,"aria-label":t.ariaLabel("moveBottom"),__parentMetadata:{parent:e.metaData}},v("moveBottomButton"));return m.createElement("div",I,m.createElement(i.Button,g({pt:v("moveUpButton")},D)),m.createElement(i.Button,g({pt:v("moveTopButton")},E)),m.createElement(i.Button,g({pt:v("moveDownButton")},w)),m.createElement(i.Button,g({pt:v("moveBottomButton")},x)))}));function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function N(e,t){if("object"!==C(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==C(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function U(e){var t=N(e,"string");return"symbol"===C(t)?t:String(t)}function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){var r,o,i;r=e,i=n[t],(o=U(o=t))in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}L.displayName="OrderListControls";var H=m.memo(m.forwardRef((function(e,t){var n=r.useMergeProps(),i=e.ptm,l=e.cx,a=function(t,n){return i(t,k({hostName:e.hostName},n))},c=function(e,t){return a(t,{context:{selected:y(e)}})},u=m.useRef(null),p=m.useRef(null),f=m.useRef(null),v=m.useRef(null),b={filter:function(t){return e.onFilterInputChange(t)},reset:function(){return e.resetFilter()}},y=function(t){return-1!==o.ObjectUtils.findIndexInList(t,e.selection,e.dataKey)},h=function(t,n){p.current!==n&&p.current+1!==n&&(f.current=n,!e.isUnstyled()&&o.DomHandler.addClass(t.target,"p-orderlist-droppoint-highlight"),t.target.setAttribute("data-p-orderlist-droppoint-highlight",!0),t.preventDefault())},I=function(t){f.current=null,!e.isUnstyled()&&o.DomHandler.removeClass(t.target,"p-orderlist-droppoint-highlight"),t.target.setAttribute("data-p-orderlist-droppoint-highlight",!1)},D=function(t){var n=p.current>f.current?f.current:0===f.current?0:f.current-1,r=O(e.value);o.ObjectUtils.reorderArray(r,p.current,n),f.current=null,!e.isUnstyled()&&o.DomHandler.removeClass(t.target,"p-orderlist-droppoint-highlight"),t.target.setAttribute("data-p-orderlist-droppoint-highlight",!1),e.onChange&&e.onChange({originalEvent:t,value:r})},E=function(e){u.current=!1},w=function(e){if(u.current){var t=v.current.getBoundingClientRect().top+o.DomHandler.getWindowScrollTop(),n=t+v.current.clientHeight-e.pageY,r=e.pageY-t;n<25&&n>0?v.current.scrollTop+=15:r<25&&r>0&&(v.current.scrollTop-=15)}},x=function(e){13===e.which&&e.preventDefault()},S=function(t,n){var r;e.focusOnHover&&e.focused&&(null==e||null===(r=e.changeFocusedOptionIndex)||void 0===r||r.call(e,n))},j=function(e,t){var r=n({className:l("droppoint"),onDragOver:function(t){return h(t,e+1)},onDragLeave:I,onDrop:D},a("droppoint"));return m.createElement("li",g({key:t},r))};m.useImperativeHandle(t,(function(){return{getElement:function(){return v.current}}}));var L,C,N,U=(L=n({className:l("header")},a("header")),e.header?m.createElement("div",L,e.header):null),B=function(){var t=n({className:l("icon")},a("icon")),r=o.IconUtils.getJSXIcon(e.filterIcon||m.createElement(s.SearchIcon,t),k({},t),{props:e});if(e.filter){var i=n({className:l("filter")},a("filter")),c=n({type:"text",value:e.filterValue,onChange:e.onFilter,onKeyDown:x,placeholder:e.placeholder,className:l("filterInput")},a("filterInput")),u=n({className:l("filterIcon")},a("filterIcon")),d=m.createElement("div",i,m.createElement("input",c),m.createElement("span",u,r));if(e.filterTemplate)d=o.ObjectUtils.getJSXElement(e.filterTemplate,{className:"p-orderlist-filter",inputProps:{inputClassName:"p-orderlist-filter-input p-inputtext p-component",onChange:e.onFilter,onKeyDown:x},filterOptions:b,iconClassName:"p-orderlist-filter-icon",element:d,props:e});var p=n({className:l("filterContainer")},a("filterContainer"));return m.createElement("div",p,d)}return null}(),H=(C=e.value?e.value.map((function(t,r){var i=e.itemTemplate?e.itemTemplate(t):t,a=e.parentId+"_"+r,s=e.focused&&e.focusedOptionId===a,f=y(t);if(e.dragdrop){var v=n({id:a,role:"option",draggable:"true",onClick:function(n){return e.onItemClick({originalEvent:n,value:t,index:r})},onMouseDown:e.onOptionMouseDown,onMouseMove:function(e){return S(0,r)},onDragStart:function(e){return t=r,e.dataTransfer.setData("text","orderlist"),u.current=!0,void(p.current=t);var t},onDragEnd:E,className:o.classNames(e.className,l("item",{selected:f,focused:s})),"aria-selected":f,"data-p-highlight":f,"data-p-focused":s},c(t,"item")),b=[];return 0===r&&b.push(j(t,r)),b.push(m.createElement("li",g({key:a},v),i)),b.push(j(r,a+"_droppoint")),b}var h=n({id:a,role:"option",onClick:function(n){return e.onItemClick({originalEvent:n,value:t,index:r})},onMouseDown:e.onOptionMouseDown,onMouseMove:function(e){return S(0,r)},className:o.classNames(e.className,l("item",{selected:f,focused:s})),"aria-selected":f,"data-p-highlight":f,"data-p-focused":s},c(t,"item"));return m.createElement("li",g({key:a},h),i,m.createElement(d.Ripple,null))})):null,N=n({ref:v,className:l("list"),style:e.listStyle,onDragOver:w,role:"listbox",onFocus:e.onListFocus,onBlur:e.onListBlur,onKeyDown:e.onListKeyDown,tabIndex:e.tabIndex,"aria-activedescendant":e.focused?e.focusedOptionId:null,"aria-label":e.ariaLabel,"aria-labelledby":e.ariaLabelledBy,"aria-multiselectable":!0},a("list")),m.createElement("ul",N,C)),M=n({className:l("container")},a("container"));return m.createElement("div",M,U,B,H)})));H.displayName="OrderListSubList";var M=m.memo(m.forwardRef((function(e,i){var l=r.useMergeProps(),a=m.useContext(t.PrimeReactContext),c=j.getProps(e,a),u=S(m.useState([]),2),s=u[0],d=u[1],p=S(m.useState(""),2),f=p[0],b=p[1],y=S(m.useState(null),2),h=y[0],I=y[1],D=S(m.useState(!1),2),E=D[0],w=D[1],x=S(m.useState(null),2),C=x[0],N=x[1],U=S(m.useState(-1),2),B=U[0],k=U[1],M=o.ObjectUtils.isNotEmpty(f),K=m.useRef(null),T=m.useRef(null),P=m.useRef(null),F=m.useRef(null),A={props:c,state:{selection:s,filterValue:f,attributeSelector:h}},R=j.setMetaData(A),_=R.ptm,q=R.cx,V=R.isUnstyled;n.useHandleStyle(j.css.styles,V,{name:"orderlist"});var Y=function(){if(M){var e=f.trim().toLocaleLowerCase(c.filterLocale),n=c.filterBy?c.filterBy.split(","):[];return t.FilterService.filter(c.value,n,e,c.filterMatchMode,c.filterLocale)}return c.value}(),J=function(){return F.current&&F.current.getElement()},X=function(e){var t=e.originalEvent,n=e.value,r=e.index,i=o.ObjectUtils.findIndexInList(n,s),l=J(),a=o.DomHandler.find(l,'[data-pc-section="item"]')[r].getAttribute("id");k(a);var c,u=t.metaKey||t.ctrlKey;c=-1!==i?u?s.filter((function(e,t){return t!==i})):[n]:u?[].concat(O(s),[n]):[n],d(c)},z=function(e){var t=Y[e],n=-1!==o.ObjectUtils.findIndexInList(t,s);d(n?s.filter((function(e){return e!==t})):[].concat(O(s),[t]))},W=function(e){if(-1===B){var t=e&&e.children?O(e.children):[],n=$(e,t);return c.autoOptionFocus&&-1===n&&(n=G(e,t)),n}return-1},$=function(e,t){if(s.length){var n=o.DomHandler.findSingle(e,'[data-p-highlight="true"]');return o.ObjectUtils.findIndexInList(n,t)}return-1},G=function(e,t){var n=o.DomHandler.findSingle(e,'[data-pc-section="item"]');return o.ObjectUtils.findIndexInList(n,t)},Q=function(e){var t=oe(B);le(t),e.shiftKey&&z(t),e.preventDefault()},Z=function(e){var t=ie(B);le(t),e.shiftKey&&z(t),e.preventDefault()},ee=function(e){if(e.ctrlKey&&e.shiftKey){var t=J(),n=o.DomHandler.find(t,'[data-pc-section="item"]'),r=o.DomHandler.findSingle(t,'[data-pc-section="item"][id='.concat(B,"]")),i=O(n).findIndex((function(e){return e===r}));d(O(Y).slice(0,i+1))}else le(0);e.preventDefault()},te=function(e){var t=J();if(e.ctrlKey&&e.shiftKey){var n=o.DomHandler.find(t,'[data-pc-section="item"]'),r=o.DomHandler.findSingle(t,'[data-pc-section="item"][id='.concat(B,"]")),i=O(n).findIndex((function(e){return e===r}));d(O(Y).slice(i,n.length))}else le(o.DomHandler.find(t,'[data-pc-section="item"]').length-1);e.preventDefault()},ne=function(e){var t=J(),n=o.DomHandler.find(t,'[data-pc-section="item"]'),r=o.DomHandler.findSingle(t,'[data-pc-section="item"][id='.concat(B,"]")),i=O(n).findIndex((function(e){return e===r}));X({originalEvent:e,value:Y[i],index:i}),e.preventDefault()},re=function(e){e.preventDefault();var t=J();if(e.shiftKey&&s&&s.length>0){var n=o.DomHandler.find(t,'[data-pc-section="item"]'),r=o.ObjectUtils.findIndexInList(s[0],O(Y)),i=o.DomHandler.findSingle(t,'[data-pc-section="item"][id='.concat(B,"]")),l=O(n).findIndex((function(e){return e===i}));d(O(Y).slice(Math.min(r,l),Math.max(r,l)+1))}else ne(e)},oe=function(e){var t=J(),n=O(o.DomHandler.find(t,'[data-pc-section="item"]')).findIndex((function(t){return t.id===e}));return n>-1?n+1:0},ie=function(e){var t=J(),n=O(o.DomHandler.find(t,'[data-pc-section="item"]')).findIndex((function(t){return t.id===e}));return n>-1?n-1:0},le=function(e){var t,n=J(),r=o.DomHandler.find(n,'[data-pc-section="item"]');if(e>=r.length)t=r.length-1;else{if(e<0)return;t=e}var i=r[t]?r[t].getAttribute("id"):-1;k(i),ae(i)},ae=function(e){var t=J(),n=o.DomHandler.findSingle(t,'[data-pc-section="item"][id="'.concat(e,'"]'));n&&n.scrollIntoView&&n.scrollIntoView({block:"nearest",inline:"start"})},ce=function(){if(!T.current){T.current=o.DomHandler.createInlineStyle(a&&a.nonce||v.default.nonce,a&&a.styleContainer);var e="\n@media screen and (max-width: ".concat(c.breakpoint,") {\n    .p-orderlist[").concat(h,"] {\n        flex-direction: column;\n    }\n\n    .p-orderlist[").concat(h,"] .p-orderlist-controls {\n        padding: var(--content-padding);\n        flex-direction: row;\n    }\n\n    .p-orderlist[").concat(h,"] .p-orderlist-controls .p-button {\n        margin-right: var(--inline-spacing);\n        margin-bottom: 0;\n    }\n\n    .p-orderlist[").concat(h,"] .p-orderlist-controls .p-button:last-child {\n        margin-right: 0;\n    }\n}\n");T.current.innerHTML=e}};m.useImperativeHandle(i,(function(){return{props:c,getElement:function(){return K.current}}})),r.useMountEffect((function(){!h&&I(o.UniqueComponentId())})),r.useUpdateEffect((function(){return h&&(K.current.setAttribute(h,""),ce()),function(){T.current=o.DomHandler.removeInlineStyle(T.current)}}),[h,c.breakpoint]),r.useUpdateEffect((function(){N(-1!==B?B:null)}),[B]),r.useUpdateEffect((function(){P.current&&(P.current=null)}));var ue=l({ref:K,id:c.id,className:o.classNames(c.className,q("root")),style:c.style},j.getOtherProps(c),_("root"));return m.createElement("div",ue,m.createElement(L,{hostName:"OrderList",value:Y,selection:s,onReorder:function(e){c.onChange&&c.onChange({event:e.originalEvent,value:e.value}),P.current=e.direction},dataKey:c.dataKey,moveUpIcon:c.moveUpIcon,moveTopIcon:c.moveTopIcon,moveDownIcon:c.moveDownIcon,moveBottomIcon:c.moveBottomIcon,ptm:_,cx:q,unstyled:c.unstyled,metaData:A}),m.createElement(H,g({ref:F,hostName:"OrderList",focused:E,ariaLabel:c.ariaLabel,ariaLabelledBy:c.ariaLabelledBy,value:Y,selection:s,onItemClick:X,onOptionMouseDown:function(e){k(e)},focusedOptionId:C,onListKeyDown:function(e){switch(e.code){case"ArrowDown":Q(e);break;case"ArrowUp":Z(e);break;case"Home":ee(e);break;case"End":te(e);break;case"Enter":case"NumpadEnter":ne(e);break;case"Space":re(e);break;case"KeyA":e.ctrlKey&&(d(Y),e.preventDefault())}},onListFocus:function(e){w(!0);var t=J(),n=W(t);le(n),c.onFocus&&c.onFocus(e)},onListBlur:function(e){w(!1),k(-1),c.onBlur&&c.onBlur(e)},onFilterInputChange:function(e){var t=e.target.value;b(t),c.onFilter&&c.onFilter({originalEvent:e,filter:t})},itemTemplate:c.itemTemplate,filter:c.filter,onFilter:function(e){var t=e.target.value;b(t),c.onFilter&&c.onFilter({originalEvent:e,value:t})},resetFilter:function(){b(""),c.onFilter&&c.onFilter({filter:""})},filterTemplate:c.filterTemplate,header:c.header,parentId:h,listStyle:c.listStyle,dataKey:c.dataKey,dragdrop:c.dragdrop,onChange:c.onChange,tabIndex:c.tabIndex,filterIcon:c.filterIcon,isUnstyled:V,ptm:_,cx:q,changeFocusedOptionIndex:le},c)))})));M.displayName="OrderList",exports.OrderList=M;
