import*as t from"react";import e,{PrimeReactContext as r}from"primereact/api";import{ComponentBase as n,useHandleStyle as o}from"primereact/componentbase";import{useMergeProps as i,useResizeListener as a,useOverlayScrollListener as u,useMountEffect as l,useUpdateEffect as c,useUnmountEffect as p}from"primereact/hooks";import{Portal as s}from"primereact/portal";import{classNames as f,DomHandler as d,ZIndexUtils as m,ObjectUtils as h}from"primereact/utils";function v(){return v=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},v.apply(this,arguments)}function y(t){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y(t)}function b(t,e){if("object"!==y(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function g(t){var e=b(t,"string");return"symbol"===y(e)?e:String(e)}function w(t,e,r){return(e=g(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function E(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function x(t){if(Array.isArray(t))return E(t)}function O(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function S(t,e){if(t){if("string"==typeof t)return E(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?E(t,e):void 0}}function T(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function j(t){if(Array.isArray(t))return t}function P(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],l=!0,c=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);l=!0);}catch(t){c=!0,o=t}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}function k(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function D(t,e){return j(t)||P(t,e)||S(t,e)||k()}var I=n.extend({defaultProps:{__TYPE:"Tooltip",appendTo:null,at:null,autoHide:!0,autoZIndex:!0,baseZIndex:0,className:null,content:null,disabled:!1,event:null,hideDelay:0,hideEvent:"mouseleave",id:null,mouseTrack:!1,mouseTrackLeft:5,mouseTrackTop:5,my:null,onBeforeHide:null,onBeforeShow:null,onHide:null,onShow:null,position:"right",showDelay:0,showEvent:"mouseenter",showOnDisabled:!1,style:null,target:null,updateDelay:0,children:void 0},css:{classes:{root:function(t){var e=t.classNameState;return f("p-tooltip p-component",w({},"p-tooltip-".concat(t.positionState),!0),e)},arrow:"p-tooltip-arrow",text:"p-tooltip-text"},styles:"\n@layer primereact {\n    .p-tooltip {\n        position: absolute;\n        padding: .25em .5rem;\n        /* #3687: Tooltip prevent scrollbar flickering */\n        top: -9999px;\n        left: -9999px;\n    }\n    \n    .p-tooltip.p-tooltip-right,\n    .p-tooltip.p-tooltip-left {\n        padding: 0 .25rem;\n    }\n    \n    .p-tooltip.p-tooltip-top,\n    .p-tooltip.p-tooltip-bottom {\n        padding:.25em 0;\n    }\n    \n    .p-tooltip .p-tooltip-text {\n       white-space: pre-line;\n       word-break: break-word;\n    }\n    \n    .p-tooltip-arrow {\n        position: absolute;\n        width: 0;\n        height: 0;\n        border-color: transparent;\n        border-style: solid;\n    }\n    \n    .p-tooltip-right .p-tooltip-arrow {\n        top: 50%;\n        left: 0;\n        margin-top: -.25rem;\n        border-width: .25em .25em .25em 0;\n    }\n    \n    .p-tooltip-left .p-tooltip-arrow {\n        top: 50%;\n        right: 0;\n        margin-top: -.25rem;\n        border-width: .25em 0 .25em .25rem;\n    }\n    \n    .p-tooltip.p-tooltip-top {\n        padding: .25em 0;\n    }\n    \n    .p-tooltip-top .p-tooltip-arrow {\n        bottom: 0;\n        left: 50%;\n        margin-left: -.25rem;\n        border-width: .25em .25em 0;\n    }\n    \n    .p-tooltip-bottom .p-tooltip-arrow {\n        top: 0;\n        left: 50%;\n        margin-left: -.25rem;\n        border-width: 0 .25em .25rem;\n    }\n\n    .p-tooltip-target-wrapper {\n        display: inline-flex;\n    }\n}\n",inlineStyles:{arrow:function(t){var e=t.context;return{top:e.bottom?"0":e.right||e.left||!e.right&&!e.left&&!e.top&&!e.bottom?"50%":null,bottom:e.top?"0":null,left:!e.right&&(e.right||e.left||e.top||e.bottom)?e.top||e.bottom?"50%":null:"0",right:e.left?"0":null}}}}});function N(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function C(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?N(Object(r),!0).forEach((function(e){w(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var A=t.memo(t.forwardRef((function(n,y){var b=i(),g=t.useContext(r),w=I.getProps(n,g),E=D(t.useState(!1),2),j=E[0],P=E[1],k=D(t.useState(w.position),2),N=k[0],A=k[1],H=D(t.useState(""),2),L=H[0],R=H[1],W={props:w,state:{visible:j,position:N,className:L},context:{right:"right"===N,left:"left"===N,top:"top"===N,bottom:"bottom"===N}},M=I.setMetaData(W),Z=M.ptm,B=M.cx,F=M.sx;o(I.css.styles,M.isUnstyled,{name:"tooltip"});var U=t.useRef(null),z=t.useRef(null),Y=t.useRef(null),_=t.useRef(null),X=t.useRef(!0),$=t.useRef({}),q=t.useRef(null),G=D(a({listener:function(t){!d.isTouchDevice()&&ft(t)}}),2),J=G[0],K=G[1],Q=D(u({target:Y.current,listener:function(t){ft(t)},when:j}),2),V=Q[0],tt=Q[1],et=function(t){return it(t,"mousetrack")||w.mouseTrack},rt=function(t){return"true"===it(t,"disabled")||at(t,"disabled")||w.disabled},nt=function(t){return it(t,"showondisabled")||w.showOnDisabled},ot=function(){return it(Y.current,"autohide")||w.autoHide},it=function(t,e){return at(t,"data-pr-".concat(e))?t.getAttribute("data-pr-".concat(e)):null},at=function(t,e){return t&&t.hasAttribute(e)},ut=function(t){var e=[it(t,"showevent")||w.showEvent],r=[it(t,"hideevent")||w.hideEvent];if(et(t))e=["mousemove"],r=["mouseleave"];else{var n=it(t,"event")||w.event;"focus"===n&&(e=["focus"],r=["blur"]),"both"===n&&(e=["focus","mouseenter"],r=["blur","mouseleave"])}return{showEvents:e,hideEvents:r}},lt=function(t){return{top:it(t,"mousetracktop")||w.mouseTrackTop,left:it(t,"mousetrackleft")||w.mouseTrackLeft}},ct=function(t,e){if(z.current){var r=it(t,"tooltip")||w.content;r?(z.current.innerHTML="",z.current.appendChild(document.createTextNode(r)),e()):w.children&&e()}},pt=function(t){ct(Y.current,(function(){var r=q.current,n=r.pageX,o=r.pageY;w.autoZIndex&&!m.get(U.current)&&m.set("tooltip",U.current,g&&g.autoZIndex||e.autoZIndex,w.baseZIndex||g&&g.zIndex.tooltip||e.zIndex.tooltip),U.current.style.left="",U.current.style.top="",ot()&&(U.current.style.pointerEvents="none");var i=et(Y.current)||"mouse"===t;(i&&!_.current||i)&&(_.current={width:d.getOuterWidth(U.current),height:d.getOuterHeight(U.current)}),dt(Y.current,{x:n,y:o},t)}))},st=function(t){Y.current=t.currentTarget;var e,r=rt(Y.current);(e=nt(Y.current)&&r?Y.current.firstChild:Y.current,!(w.content||it(e,"tooltip")||w.children))||r||(q.current=t,j?bt("updateDelay",pt):gt(w.onBeforeShow,{originalEvent:t,target:Y.current})&&bt("showDelay",(function(){P(!0),gt(w.onShow,{originalEvent:t,target:Y.current})})))},ft=function(t){(wt(),j)&&(gt(w.onBeforeHide,{originalEvent:t,target:Y.current})&&bt("hideDelay",(function(){(ot()||!1!==X.current)&&(m.clear(U.current),d.removeClass(U.current,"p-tooltip-active"),P(!1),gt(w.onHide,{originalEvent:t,target:Y.current}))})))},dt=function(t,e,r){var n=0,o=0,i=r||N;if((et(t)||"mouse"==i)&&e){var a={width:d.getOuterWidth(U.current),height:d.getOuterHeight(U.current)};n=e.x,o=e.y;var u=lt(t),l=u.top,c=u.left;switch(i){case"left":n-=a.width+c,o-=a.height/2-l;break;case"right":case"mouse":n+=c,o-=a.height/2-l;break;case"top":n-=a.width/2-c,o-=a.height+l;break;case"bottom":n-=a.width/2-c,o+=l}n<=0||_.current.width>a.width?(U.current.style.left="0px",U.current.style.right=window.innerWidth-a.width-n+"px"):(U.current.style.right="",U.current.style.left=n+"px"),U.current.style.top=o+"px",d.addClass(U.current,"p-tooltip-active")}else{var p=d.findCollisionPosition(i),s=it(t,"my")||w.my||p.my,f=it(t,"at")||w.at||p.at;U.current.style.padding="0px",d.flipfitCollision(U.current,t,s,f,(function(t){var e=t.at,r=e.x,n=w.at?"center"!==r&&r!==t.my.x?r:e.y:t.at["".concat(p.axis)];U.current.style.padding="",A(n),mt(n),d.addClass(U.current,"p-tooltip-active")}))}},mt=function(t){if(U.current){var e=getComputedStyle(U.current);"left"===t?U.current.style.left=parseFloat(e.left)-2*parseFloat(e.paddingLeft)+"px":"top"===t&&(U.current.style.top=parseFloat(e.top)-2*parseFloat(e.paddingTop)+"px")}},ht=function(t){ot()||(X.current=!0,ft(t))},vt=function(t){if(t){var e=ut(t),r=e.showEvents,n=e.hideEvents,o=Et(t);r.forEach((function(t){return null==o?void 0:o.addEventListener(t,st)})),n.forEach((function(t){return null==o?void 0:o.addEventListener(t,ft)}))}},yt=function(t){if(t){var e=ut(t),r=e.showEvents,n=e.hideEvents,o=Et(t);r.forEach((function(t){return null==o?void 0:o.removeEventListener(t,st)})),n.forEach((function(t){return null==o?void 0:o.removeEventListener(t,ft)}))}},bt=function(t,e){wt();var r=it(Y.current,t.toLowerCase())||w[t];r?$.current["".concat(t)]=setTimeout((function(){return e()}),r):e()},gt=function(t){if(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];var o=t.apply(void 0,r);return void 0===o&&(o=!0),o}return!0},wt=function(){Object.values($.current).forEach((function(t){return clearTimeout(t)}))},Et=function(t){if(t){if(nt(t)){if(!t.hasWrapper){var e=document.createElement("div");return"INPUT"===t.nodeName?d.addMultipleClasses(e,"p-tooltip-target-wrapper p-inputwrapper"):d.addClass(e,"p-tooltip-target-wrapper"),t.parentNode.insertBefore(e,t),e.appendChild(t),t.hasWrapper=!0,e}return t.parentElement}var r;return t.hasWrapper&&((r=t.parentElement).replaceWith.apply(r,x(n=t.parentElement.childNodes)||O(n)||S(n)||T()),delete t.hasWrapper),t}var n;return null},xt=function(t){St(t),Ot(t)},Ot=function(t){Tt(t||w.target,vt)},St=function(t){Tt(t||w.target,yt)},Tt=function(t,e){if(t=h.getRefElement(t))if(d.isElement(t))e(t);else{var r=function(t){d.find(document,t).forEach((function(t){e(t)}))};t instanceof Array?t.forEach((function(t){r(t)})):r(t)}};l((function(){j&&Y.current&&rt(Y.current)&&ft()})),c((function(){return Ot(),function(){St()}}),[st,ft,w.target]),c((function(){if(j){var t=it(Y.current,"position")||N,e=it(Y.current,"classname");A(t),R(e),pt(t),J(),V()}else A(w.position),R(""),Y.current=null,_.current=null,X.current=!0;return function(){K(),tt()}}),[j]),c((function(){j&&bt("updateDelay",(function(){ct(Y.current,(function(){dt(Y.current)}))}))}),[w.content]),p((function(){ft(),m.clear(U.current)})),t.useImperativeHandle(y,(function(){return{props:w,updateTargetEvents:xt,loadTargetEvents:Ot,unloadTargetEvents:St,show:st,hide:ft,getElement:function(){return U.current},getTarget:function(){return Y.current}}}));var jt,Pt,kt,Dt,It;if(j){var Nt=(jt=Y.current,Pt=!(w.content||it(jt,"tooltip")),kt=b({id:w.id,className:f(w.className,B("root",{positionState:N,classNameState:L})),style:w.style,role:"tooltip","aria-hidden":j,onMouseEnter:function(t){ot()||(X.current=!1)},onMouseLeave:function(t){return ht(t)}},I.getOtherProps(w),Z("root")),Dt=b({className:B("arrow"),style:F("arrow",C({},W))},Z("arrow")),It=b({className:B("text")},Z("text")),t.createElement("div",v({ref:U},kt),t.createElement("div",Dt),t.createElement("div",v({ref:z},It),Pt&&w.children)));return t.createElement(s,{element:Nt,appendTo:w.appendTo,visible:!0})}return null})));A.displayName="Tooltip";export{A as Tooltip};
