import*as e from"react";import{PrimeReactContext as t}from"primereact/api";import{ComponentBase as n,useHandleStyle as r}from"primereact/componentbase";import{useMergeProps as o,useUpdateEffect as i,useMountEffect as l}from"primereact/hooks";import{CheckIcon as c}from"primereact/icons/check";import{Tooltip as u}from"primereact/tooltip";import{classNames as a,DomHandler as p,ObjectUtils as s,IconUtils as d}from"primereact/utils";function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f.apply(this,arguments)}function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function b(e,t){if("object"!==m(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==m(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function v(e){var t=b(e,"string");return"symbol"===m(t)?t:String(t)}var h=n.extend({defaultProps:{__TYPE:"Checkbox",autoFocus:!1,checked:!1,className:null,disabled:!1,falseValue:!1,icon:null,id:null,inputId:null,inputRef:null,invalid:!1,variant:null,name:null,onChange:null,onContextMenu:null,onMouseDown:null,readOnly:!1,required:!1,style:null,tabIndex:null,tooltip:null,tooltipOptions:null,trueValue:!0,value:null,children:void 0},css:{classes:{box:"p-checkbox-box",input:"p-checkbox-input",icon:"p-checkbox-icon",root:function(e){var t=e.props,n=e.context;return a("p-checkbox p-component",{"p-highlight":e.checked,"p-disabled":t.disabled,"p-invalid":t.invalid,"p-variant-filled":t.variant?"filled"===t.variant:n&&"filled"===n.inputStyle})}}}});function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){var r,o,i;r=e,i=n[t],(o=v(o=t))in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var O=e.memo(e.forwardRef((function(n,m){var b=o(),v=e.useContext(t),y=h.getProps(n,v),O=h.setMetaData({props:y,context:{checked:y.checked===y.trueValue,disabled:y.disabled}}),x=O.ptm,k=O.cx;r(h.css.styles,O.isUnstyled,{name:"checkbox"});var P=e.useRef(null),j=e.useRef(y.inputRef),w=function(){return y.checked===y.trueValue},E=function(e){if(!y.disabled&&!y.readonly&&y.onChange){var t,n=w()?y.falseValue:y.trueValue;if(null==y||null===(t=y.onChange)||void 0===t||t.call(y,{originalEvent:e,value:y.value,checked:n,stopPropagation:function(){null==e||e.stopPropagation()},preventDefault:function(){null==e||e.preventDefault()},target:{type:"checkbox",name:y.name,id:y.id,value:y.value,checked:n}}),e.defaultPrevented)return;p.focus(j.current)}};e.useImperativeHandle(m,(function(){return{props:y,focus:function(){return p.focus(j.current)},getElement:function(){return P.current},getInput:function(){return j.current}}})),e.useEffect((function(){s.combinedRefs(j,y.inputRef)}),[j,y.inputRef]),i((function(){j.current.checked=w()}),[y.checked,y.trueValue]),l((function(){y.autoFocus&&p.focus(j.current,y.autoFocus)}));var S,C,D,R,I,N=w(),M=s.isNotEmpty(y.tooltip),V=h.getOtherProps(y),F=b({id:y.id,className:a(y.className,k("root",{checked:N,context:v})),style:y.style,"data-p-highlight":N,"data-p-disabled":y.disabled,onContextMenu:y.onContextMenu,onMouseDown:y.onMouseDown},V,x("root"));return e.createElement(e.Fragment,null,e.createElement("div",f({ref:P},F),(R=s.reduceKeys(V,p.ARIA_PROPS),I=b(g({id:y.inputId,type:"checkbox",className:k("input"),name:y.name,tabIndex:y.tabIndex,onFocus:function(e){var t;null==y||null===(t=y.onFocus)||void 0===t||t.call(y)},onBlur:function(e){var t;null==y||null===(t=y.onBlur)||void 0===t||t.call(y)},onChange:function(e){return E(e)},disabled:y.disabled,readOnly:y.readOnly,required:y.required,"aria-invalid":y.invalid,checked:N},R),x("input")),e.createElement("input",f({ref:j},I))),(S=b({className:k("icon")},x("icon")),C=b({className:k("box",{checked:N}),"data-p-highlight":N,"data-p-disabled":y.disabled},x("box")),D=d.getJSXIcon(N?y.icon||e.createElement(c,S):null,g({},S),{props:y,checked:N}),e.createElement("div",C,D))),M&&e.createElement(u,f({target:P,content:y.tooltip,pt:x("tooltip")},y.tooltipOptions)))})));O.displayName="Checkbox";export{O as Checkbox};
